<aside class="bg-primary text-white h-screen flex flex-col transition-all duration-300" [class.w-64]="!collapsed" [class.w-20]="collapsed">
  <div class="px-4 py-4 border-b border-white/10" *ngIf="!collapsed">
    <div class="text-xl font-bold">Rent360</div>
  </div>

  <nav class="flex-1 overflow-y-auto px-2 py-4 space-y-1">
    <ng-container *ngFor="let item of items">
      <a
        [routerLink]="item.route"
        routerLinkActive="bg-white/10 border-l-4 border-secondary"
        class="block rounded-lg px-4 py-3 text-sm font-medium transition-all"
      >
        <span *ngIf="!collapsed">{{ item.label }}</span>
      </a>

      <div *ngIf="item.label === 'Payments' && item.children && paymentsExpanded && !collapsed" class="ml-4 mb-2 space-y-1">
        <a *ngFor="let child of item.children"
           [routerLink]="child.route"
           class="block rounded-lg px-3 py-2 text-xs text-blue-100 hover:bg-white/10">
          {{ child.label }}
        </a>
      </div>
    </ng-container>
  </nav>

  <div class="p-3 border-t border-white/10" *ngIf="user$ | async as user">
    <div class="rounded-xl bg-white/10 p-3" *ngIf="!collapsed">
      <div class="font-semibold text-sm">{{ user.fullName }}</div>
      <div class="text-xs text-blue-100">{{ user.email }}</div>
    </div>
    <button type="button" class="mt-3 w-full rounded-lg bg-white text-primary px-3 py-2 text-sm font-semibold" (click)="logout()" *ngIf="!collapsed">
      Logout
    </button>
  </div>
</aside>
