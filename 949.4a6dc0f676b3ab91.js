"use strict";(self.webpackChunkrent360=self.webpackChunkrent360||[]).push([[949],{7949:(M,l,r)=>{r.r(l),r.d(l,{PaymentsModule:()=>J});var g=r(4466),u=r(5675),c=r(8327),f=r(7574),t=r(8256),Z=r(263),h=r(1438),m=r(6895),d=r(9219),y=r(2802),T=r(5213);function A(e,o){1&e&&(t.TgZ(0,"a",17),t._uU(1," Create Payment "),t.qZA())}function P(e,o){1&e&&(t.TgZ(0,"a",22),t._uU(1," Pay Now "),t.qZA())}function C(e,o){1&e&&(t.TgZ(0,"a",22),t._uU(1," Download Receipt "),t.qZA())}function x(e,o){1&e&&(t.TgZ(0,"a",22),t._uU(1," Mark Paid "),t.qZA())}function v(e,o){1&e&&(t.TgZ(0,"a",22),t._uU(1," View "),t.qZA())}function U(e,o){if(1&e&&(t.TgZ(0,"tr",18)(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td",19),t._uU(4),t.qZA(),t.TgZ(5,"td",19),t._uU(6),t.qZA(),t.TgZ(7,"td",19),t._uU(8),t.qZA(),t.TgZ(9,"td",19),t._uU(10),t.qZA(),t.TgZ(11,"td",19),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",19),t._UZ(15,"r360-status-badge",20),t.qZA(),t.TgZ(16,"td",19),t.YNc(17,P,2,0,"a",21),t.YNc(18,C,2,0,"a",21),t.YNc(19,x,2,0,"a",21),t.YNc(20,v,2,0,"a",21),t.qZA()()),2&e){const n=o.$implicit,a=t.oxw();t.xp6(2),t.Oqu(n.id),t.xp6(2),t.Oqu(n.tenantName),t.xp6(2),t.Oqu(n.property),t.xp6(2),t.Oqu(n.unit),t.xp6(2),t.Oqu(n.dueDate),t.xp6(2),t.hij("$",t.xi3(13,11,n.amount,"1.2-2"),""),t.xp6(3),t.Q6J("value",n.status),t.xp6(2),t.Q6J("ngIf",a.isTenantView&&"Paid"!==n.status),t.xp6(1),t.Q6J("ngIf",a.isTenantView&&"Paid"===n.status),t.xp6(1),t.Q6J("ngIf",!a.isTenantView&&a.canManagePayments),t.xp6(1),t.Q6J("ngIf",!a.isTenantView&&!a.canManagePayments)}}function q(e,o){1&e&&(t.TgZ(0,"tr",18)(1,"td",23),t._uU(2,"No payment records available."),t.qZA()())}let w=(()=>{class e{constructor(n,a){this.auth=n,this.authorization=a,this.search="",this.allRows=[{id:"P-101",tenantName:"Terry Tenant",tenantEmail:"tenant@rent360.com",property:"Maple Residency",unit:"A-101",amount:1250,dueDate:"2026-02-10",status:"Paid"},{id:"P-102",tenantName:"Terry Tenant",tenantEmail:"tenant@rent360.com",property:"Maple Residency",unit:"A-101",amount:1280,dueDate:"2026-03-10",status:"Due"},{id:"P-103",tenantName:"Nina Owner Tenant",tenantEmail:"owner-tenant@rent360.com",property:"ABC",unit:"A-201",amount:1400,dueDate:"2026-02-05",status:"Late"},{id:"P-104",tenantName:"Tina Tenant Society",tenantEmail:"tenant-society@rent360.com",property:"City Nest",unit:"B-12",amount:980,dueDate:"2026-02-08",status:"Paid"}]}get isTenantView(){return this.auth.snapshotUser?.roles.includes("tenant")??!1}get canManagePayments(){return this.authorization.canWrite(c._.paymentsWrite)}get filteredRows(){const n=this.scopeRowsByRole(),a=this.search.trim().toLowerCase();return a?n.filter(s=>[s.id,s.tenantName,s.property,s.unit,s.status,s.dueDate].join(" ").toLowerCase().includes(a)):n}get totalDueAmount(){return this.filteredRows.filter(n=>"Paid"!==n.status).reduce((n,a)=>n+a.amount,0)}get paidAmount(){return this.filteredRows.filter(n=>"Paid"===n.status).reduce((n,a)=>n+a.amount,0)}get pendingCount(){return this.filteredRows.filter(n=>"Paid"!==n.status).length}scopeRowsByRole(){if(!this.isTenantView)return this.allRows;const n=this.auth.snapshotUser;if(!n)return[];const a=n.email.toLowerCase(),s=n.fullName.toLowerCase();return this.allRows.filter(i=>i.tenantEmail.toLowerCase()===a||i.tenantName.toLowerCase()===s)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.e),t.Y36(h.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-payments-list"]],decls:48,vars:16,consts:[[1,"r360-page"],[3,"title","subtitle"],[1,"r360-section","grid","grid-cols-1","gap-4","sm:grid-cols-3"],[1,"text-xs","uppercase","tracking-wide","text-gray-500"],[1,"mt-2","text-2xl","font-bold","text-success"],[1,"mt-2","text-2xl","font-bold","text-warning"],[1,"mt-2","text-2xl","font-bold","text-gray-900","dark:text-gray-100"],[1,"r360-section"],[1,"mb-6","flex","flex-col","gap-3","md:flex-row","md:items-center","md:justify-between"],[1,"r360-input","md:max-w-md",3,"value","placeholder","input"],["routerLink","/payments/create","class","r360-btn-primary",4,"ngIf"],[1,"r360-table-wrap"],[1,"r360-table"],[1,"border-b","border-gray-200","dark:border-gray-700"],[1,"r360-th"],["class","r360-row",4,"ngFor","ngForOf"],["class","r360-row",4,"ngIf"],["routerLink","/payments/create",1,"r360-btn-primary"],[1,"r360-row"],[1,"r360-td"],[3,"value"],["class","r360-action-link","href","#",4,"ngIf"],["href","#",1,"r360-action-link"],["colspan","8",1,"r360-td","text-sm","text-gray-500"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"r360-page-header",1),t.TgZ(2,"section",2)(3,"r360-card")(4,"div",3),t._uU(5,"Paid"),t.qZA(),t.TgZ(6,"div",4),t._uU(7),t.ALo(8,"number"),t.qZA()(),t.TgZ(9,"r360-card")(10,"div",3),t._uU(11,"Outstanding"),t.qZA(),t.TgZ(12,"div",5),t._uU(13),t.ALo(14,"number"),t.qZA()(),t.TgZ(15,"r360-card")(16,"div",3),t._uU(17,"Pending Payments"),t.qZA(),t.TgZ(18,"div",6),t._uU(19),t.qZA()()(),t.TgZ(20,"section",7)(21,"r360-card")(22,"div",8)(23,"input",9),t.NdJ("input",function(i){return a.search=i.target.value}),t.qZA(),t.YNc(24,A,2,0,"a",10),t.qZA(),t.TgZ(25,"div",11)(26,"table",12)(27,"thead")(28,"tr",13)(29,"th",14),t._uU(30,"ID"),t.qZA(),t.TgZ(31,"th",14),t._uU(32,"Tenant"),t.qZA(),t.TgZ(33,"th",14),t._uU(34,"Property"),t.qZA(),t.TgZ(35,"th",14),t._uU(36,"Unit"),t.qZA(),t.TgZ(37,"th",14),t._uU(38,"Due Date"),t.qZA(),t.TgZ(39,"th",14),t._uU(40,"Amount"),t.qZA(),t.TgZ(41,"th",14),t._uU(42,"Status"),t.qZA(),t.TgZ(43,"th",14),t._uU(44,"Action"),t.qZA()()(),t.TgZ(45,"tbody"),t.YNc(46,U,21,14,"tr",15),t.YNc(47,q,3,0,"tr",16),t.qZA()()()()()()),2&n&&(t.xp6(1),t.Q6J("title",a.isTenantView?"My Payments":"Payments")("subtitle",a.isTenantView?"Track your rent, due dates, and payment history":"Search, filter, and manage payment status"),t.xp6(6),t.hij("$",t.xi3(8,10,a.paidAmount,"1.2-2"),""),t.xp6(6),t.hij("$",t.xi3(14,13,a.totalDueAmount,"1.2-2"),""),t.xp6(6),t.Oqu(a.pendingCount),t.xp6(4),t.Q6J("value",a.search)("placeholder",a.isTenantView?"Search my payments":"Search all payments"),t.xp6(1),t.Q6J("ngIf",a.canManagePayments),t.xp6(22),t.Q6J("ngForOf",a.filteredRows),t.xp6(1),t.Q6J("ngIf",!a.filteredRows.length))},dependencies:[m.sg,m.O5,d.A,y.q,T.e,u.yS,m.JJ],encapsulation:2}),e})();var p=r(4006);const _=["*"];let b=(()=>{class e{constructor(){this.type="button"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["r360-button"]],inputs:{type:"type"},ngContentSelectors:_,decls:2,vars:1,consts:[[1,"r360-btn-primary",3,"type"]],template:function(n,a){1&n&&(t.F$t(),t.TgZ(0,"button",0),t.Hsn(1),t.qZA()),2&n&&t.Q6J("type",a.type)},encapsulation:2}),e})(),L=(()=>{class e{constructor(){this.placeholder=""}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["r360-input"]],inputs:{placeholder:"placeholder"},decls:1,vars:1,consts:[[1,"r360-input",3,"placeholder"]],template:function(n,a){1&n&&t._UZ(0,"input",0),2&n&&t.Q6J("placeholder",a.placeholder)},encapsulation:2}),e})();const N=[{path:"",component:w},{path:"create",component:(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-create-payment"]],decls:15,vars:0,consts:[["title","Create Payment","subtitle","Enter payment details"],[1,"mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"text-sm","font-medium","mb-2","block"],["placeholder","Tenant name"],["placeholder","Amount"],[1,"md:col-span-2"],["type","submit"]],template:function(n,a){1&n&&(t._UZ(0,"r360-page-header",0),t.TgZ(1,"section",1)(2,"r360-card")(3,"form",2)(4,"div")(5,"label",3),t._uU(6,"Tenant"),t.qZA(),t._UZ(7,"r360-input",4),t.qZA(),t.TgZ(8,"div")(9,"label",3),t._uU(10,"Amount"),t.qZA(),t._UZ(11,"r360-input",5),t.qZA(),t.TgZ(12,"div",6)(13,"r360-button",7),t._uU(14,"Save Payment"),t.qZA()()()()())},dependencies:[p._Y,p.JL,p.F,b,d.A,L,y.q],encapsulation:2}),e})(),canActivate:[f.a],data:{permission:c._.paymentsWrite}}];let R=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(N),u.Bz]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.m,R]}),e})()}}]);