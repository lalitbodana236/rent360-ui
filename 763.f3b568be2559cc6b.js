"use strict";(self.webpackChunkrent360=self.webpackChunkrent360||[]).push([[763],{6763:(M,p,r)=>{r.r(p),r.d(p,{PaymentsModule:()=>J});var g=r(4466),u=r(5675),c=r(8327),h=r(7574),t=r(8256),Z=r(263),f=r(1438),l=r(6895),d=r(9219),y=r(2802),T=r(5213),A=r(8821),P=r(7338);let C=(()=>{class e{constructor(n){this.settings=n,this.locale="en-US",this.timeZone="America/New_York",this.timeFormat="12h",this.settings.userSettings$.subscribe(a=>{this.locale="hi"===a.language?"hi-IN":"en-US",this.timeZone=a.timeZone,this.timeFormat=a.timeFormat})}transform(n){const a=new Date(n);return Number.isNaN(a.getTime())?String(n):new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:"12h"===this.timeFormat,timeZone:this.timeZone}).format(a)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(P.s,16))},e.\u0275pipe=t.Yjl({name:"appDate",type:e,pure:!1}),e})();function v(e,o){1&e&&(t.TgZ(0,"a",17),t._uU(1," Create Payment "),t.qZA())}function U(e,o){1&e&&(t.TgZ(0,"a",22),t._uU(1," Pay Now "),t.qZA())}function x(e,o){1&e&&(t.TgZ(0,"a",22),t._uU(1," Download Receipt "),t.qZA())}function q(e,o){1&e&&(t.TgZ(0,"a",22),t._uU(1," Mark Paid "),t.qZA())}function w(e,o){1&e&&(t.TgZ(0,"a",22),t._uU(1," View "),t.qZA())}function L(e,o){if(1&e&&(t.TgZ(0,"tr",18)(1,"td",19),t._uU(2),t.qZA(),t.TgZ(3,"td",19),t._uU(4),t.qZA(),t.TgZ(5,"td",19),t._uU(6),t.qZA(),t.TgZ(7,"td",19),t._uU(8),t.qZA(),t.TgZ(9,"td",19),t._uU(10),t.ALo(11,"appDate"),t.qZA(),t.TgZ(12,"td",19),t._uU(13),t.ALo(14,"appCurrency"),t.qZA(),t.TgZ(15,"td",19),t._UZ(16,"r360-status-badge",20),t.qZA(),t.TgZ(17,"td",19),t.YNc(18,U,2,0,"a",21),t.YNc(19,x,2,0,"a",21),t.YNc(20,q,2,0,"a",21),t.YNc(21,w,2,0,"a",21),t.qZA()()),2&e){const n=o.$implicit,a=t.oxw();t.xp6(2),t.Oqu(n.id),t.xp6(2),t.Oqu(n.tenantName),t.xp6(2),t.Oqu(n.property),t.xp6(2),t.Oqu(n.unit),t.xp6(2),t.Oqu(t.lcZ(11,11,n.dueDate)),t.xp6(3),t.Oqu(t.lcZ(14,13,n.amount)),t.xp6(3),t.Q6J("value",n.status),t.xp6(2),t.Q6J("ngIf",a.isTenantView&&"Paid"!==n.status),t.xp6(1),t.Q6J("ngIf",a.isTenantView&&"Paid"===n.status),t.xp6(1),t.Q6J("ngIf",!a.isTenantView&&a.canManagePayments),t.xp6(1),t.Q6J("ngIf",!a.isTenantView&&!a.canManagePayments)}}function N(e,o){1&e&&(t.TgZ(0,"tr",18)(1,"td",23),t._uU(2,"No payment records available."),t.qZA()())}let _=(()=>{class e{constructor(n,a){this.auth=n,this.authorization=a,this.search="",this.allRows=[{id:"P-101",tenantName:"Terry Tenant",tenantEmail:"tenant@rent360.com",property:"Maple Residency",unit:"A-101",amount:1250,dueDate:"2026-02-10",status:"Paid"},{id:"P-102",tenantName:"Terry Tenant",tenantEmail:"tenant@rent360.com",property:"Maple Residency",unit:"A-101",amount:1280,dueDate:"2026-03-10",status:"Due"},{id:"P-103",tenantName:"Nina Owner Tenant",tenantEmail:"owner-tenant@rent360.com",property:"ABC",unit:"A-201",amount:1400,dueDate:"2026-02-05",status:"Late"},{id:"P-104",tenantName:"Tina Tenant Society",tenantEmail:"tenant-society@rent360.com",property:"City Nest",unit:"B-12",amount:980,dueDate:"2026-02-08",status:"Paid"}]}get isTenantView(){return this.auth.snapshotUser?.roles.includes("tenant")??!1}get canManagePayments(){return this.authorization.canWrite(c._.paymentsWrite)}get filteredRows(){const n=this.scopeRowsByRole(),a=this.search.trim().toLowerCase();return a?n.filter(s=>[s.id,s.tenantName,s.property,s.unit,s.status,s.dueDate].join(" ").toLowerCase().includes(a)):n}get totalDueAmount(){return this.filteredRows.filter(n=>"Paid"!==n.status).reduce((n,a)=>n+a.amount,0)}get paidAmount(){return this.filteredRows.filter(n=>"Paid"===n.status).reduce((n,a)=>n+a.amount,0)}get pendingCount(){return this.filteredRows.filter(n=>"Paid"!==n.status).length}scopeRowsByRole(){if(!this.isTenantView)return this.allRows;const n=this.auth.snapshotUser;if(!n)return[];const a=n.email.toLowerCase(),s=n.fullName.toLowerCase();return this.allRows.filter(i=>i.tenantEmail.toLowerCase()===a||i.tenantName.toLowerCase()===s)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.e),t.Y36(f.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-payments-list"]],decls:48,vars:14,consts:[[1,"r360-page"],[3,"title","subtitle"],[1,"r360-section","grid","grid-cols-1","gap-4","sm:grid-cols-3"],[1,"text-xs","uppercase","tracking-wide","text-gray-500"],[1,"mt-2","text-2xl","font-bold","text-success"],[1,"mt-2","text-2xl","font-bold","text-warning"],[1,"mt-2","text-2xl","font-bold","text-gray-900","dark:text-gray-100"],[1,"r360-section"],[1,"mb-6","flex","flex-col","gap-3","md:flex-row","md:items-center","md:justify-between"],[1,"r360-input","md:max-w-md",3,"value","placeholder","input"],["routerLink","/payments/create","class","r360-btn-primary",4,"ngIf"],[1,"r360-table-wrap"],[1,"r360-table"],[1,"border-b","border-gray-200","dark:border-gray-700"],[1,"r360-th"],["class","r360-row",4,"ngFor","ngForOf"],["class","r360-row",4,"ngIf"],["routerLink","/payments/create",1,"r360-btn-primary"],[1,"r360-row"],[1,"r360-td"],[3,"value"],["class","r360-action-link","href","#",4,"ngIf"],["href","#",1,"r360-action-link"],["colspan","8",1,"r360-td","text-sm","text-gray-500"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"r360-page-header",1),t.TgZ(2,"section",2)(3,"r360-card")(4,"div",3),t._uU(5,"Paid"),t.qZA(),t.TgZ(6,"div",4),t._uU(7),t.ALo(8,"appCurrency"),t.qZA()(),t.TgZ(9,"r360-card")(10,"div",3),t._uU(11,"Outstanding"),t.qZA(),t.TgZ(12,"div",5),t._uU(13),t.ALo(14,"appCurrency"),t.qZA()(),t.TgZ(15,"r360-card")(16,"div",3),t._uU(17,"Pending Payments"),t.qZA(),t.TgZ(18,"div",6),t._uU(19),t.qZA()()(),t.TgZ(20,"section",7)(21,"r360-card")(22,"div",8)(23,"input",9),t.NdJ("input",function(i){return a.search=i.target.value}),t.qZA(),t.YNc(24,v,2,0,"a",10),t.qZA(),t.TgZ(25,"div",11)(26,"table",12)(27,"thead")(28,"tr",13)(29,"th",14),t._uU(30,"ID"),t.qZA(),t.TgZ(31,"th",14),t._uU(32,"Tenant"),t.qZA(),t.TgZ(33,"th",14),t._uU(34,"Property"),t.qZA(),t.TgZ(35,"th",14),t._uU(36,"Unit"),t.qZA(),t.TgZ(37,"th",14),t._uU(38,"Due Date"),t.qZA(),t.TgZ(39,"th",14),t._uU(40,"Amount"),t.qZA(),t.TgZ(41,"th",14),t._uU(42,"Status"),t.qZA(),t.TgZ(43,"th",14),t._uU(44,"Action"),t.qZA()()(),t.TgZ(45,"tbody"),t.YNc(46,L,22,15,"tr",15),t.YNc(47,N,3,0,"tr",16),t.qZA()()()()()()),2&n&&(t.xp6(1),t.Q6J("title",a.isTenantView?"My Payments":"Payments")("subtitle",a.isTenantView?"Track your rent, due dates, and payment history":"Search, filter, and manage payment status"),t.xp6(6),t.Oqu(t.lcZ(8,10,a.paidAmount)),t.xp6(6),t.Oqu(t.lcZ(14,12,a.totalDueAmount)),t.xp6(6),t.Oqu(a.pendingCount),t.xp6(4),t.Q6J("value",a.search)("placeholder",a.isTenantView?"Search my payments":"Search all payments"),t.xp6(1),t.Q6J("ngIf",a.canManagePayments),t.xp6(22),t.Q6J("ngForOf",a.filteredRows),t.xp6(1),t.Q6J("ngIf",!a.filteredRows.length))},dependencies:[l.sg,l.O5,d.A,y.q,T.e,u.yS,A.I,C],encapsulation:2}),e})();var m=r(4006);const b=["*"];let D=(()=>{class e{constructor(){this.type="button"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["r360-button"]],inputs:{type:"type"},ngContentSelectors:b,decls:2,vars:1,consts:[[1,"r360-btn-primary",3,"type"]],template:function(n,a){1&n&&(t.F$t(),t.TgZ(0,"button",0),t.Hsn(1),t.qZA()),2&n&&t.Q6J("type",a.type)},encapsulation:2}),e})(),R=(()=>{class e{constructor(){this.placeholder=""}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["r360-input"]],inputs:{placeholder:"placeholder"},decls:1,vars:1,consts:[[1,"r360-input",3,"placeholder"]],template:function(n,a){1&n&&t._UZ(0,"input",0),2&n&&t.Q6J("placeholder",a.placeholder)},encapsulation:2}),e})();const F=[{path:"",component:_},{path:"create",component:(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-create-payment"]],decls:15,vars:0,consts:[["title","Create Payment","subtitle","Enter payment details"],[1,"mb-8"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"text-sm","font-medium","mb-2","block"],["placeholder","Tenant name"],["placeholder","Amount"],[1,"md:col-span-2"],["type","submit"]],template:function(n,a){1&n&&(t._UZ(0,"r360-page-header",0),t.TgZ(1,"section",1)(2,"r360-card")(3,"form",2)(4,"div")(5,"label",3),t._uU(6,"Tenant"),t.qZA(),t._UZ(7,"r360-input",4),t.qZA(),t.TgZ(8,"div")(9,"label",3),t._uU(10,"Amount"),t.qZA(),t._UZ(11,"r360-input",5),t.qZA(),t.TgZ(12,"div",6)(13,"r360-button",7),t._uU(14,"Save Payment"),t.qZA()()()()())},dependencies:[m._Y,m.JL,m.F,D,d.A,R,y.q],encapsulation:2}),e})(),canActivate:[h.a],data:{permission:c._.paymentsWrite}}];let I=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(F),u.Bz]}),e})(),J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.m,I]}),e})()}}]);